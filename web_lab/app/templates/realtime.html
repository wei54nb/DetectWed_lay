<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NKUST - 即時動作分析</title>
    
    <!-- 外部函式庫 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    
    <!-- 自定義樣式和腳本 -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/realtime.css') }}">
    <script src="{{ url_for('static', filename='js/realtime.js') }}" defer></script>
</head>
<body>
<div class="header">
    <div class="logo-container">
        <img src="{{ url_for('static', filename='img/nkust.png') }}" alt="NKUST Logo">
        <span>國立高雄科技大學</span>
    </div>
    <div class="nav-buttons">
        <a href="{{ url_for('main.index') }}" class="button">回首頁</a>
        <button class="button">動作知識</button>
        <button class="button">器材介紹</button>
    </div>
</div>

<div class="content">
    <div class="bottom-stats-container">
        <div class="stats-card">
            <div class="stats-label">完成次數</div>
            <div class="stats-value" id="exercise-count-stats">0</div>
        </div>
        <button id="export-excel" class="export-button">導出戰績</button>
    </div>

    <div class="data-inputs">
        <div class="input-group">
            <label for="student-id">學號</label>
            <input type="text" id="student-id" placeholder="請輸入學號">
        </div>
        <div class="input-group">
            <label for="weight">重量(Kg)</label>
            <input type="number" id="weight" placeholder="請輸入重量">
        </div>
        <div class="input-group">
            <label for="sets">組數</label>
            <input type="number" id="sets" placeholder="請輸入組數">
        </div>
        <div class="input-group">
            <label for="reps">每組次數</label>
            <input type="number" id="reps" placeholder="請輸入每組次數">
        </div>
    </div>

    <div class="video-container">
        <img id="video-feed" src="{{ url_for('exercise.video_feed') }}" alt="Real-time Video Feed">
    </div>


    <div class="data-container">
        <h2>即時數據</h2>
        <div class="exercise-counter">
            <div class="counter-label">運動次數</div>
            <div class="counter-value" id="exercise-count">0</div>
            
        </div>
        <div class="exercise-counter">
            <div class="counter-label">剩餘組數</div>
            <div class="counter-value" id="remaining-sets">0</div>
        </div>

        <div class="control-panel">
            <select id="exercise-type" class="exercise-selector">
                <option value="squat">深蹲訓練</option>
                <option value="bicep-curl">二頭訓練</option>
                <option value="shoulder-press">肩推訓練</option>
                <option value="push-up">伏地挺身</option>
                <option value="pull-up">引體向上</option>
                <option value="dumbbell-row">啞鈴划船</option>
            </select>
            <button id="start-detection" class="button">開始偵測</button>
            <button id="stop-detection" class="button">停止偵測</button>
        </div>
        <div class="angle-display">
            <!-- 角度數據將在這裡動態更新 -->
        </div>

        <div class="bottom-interaction-area">
            <!-- 教練提示視窗放在左下角 -->
            <div class="coach-tip-container">
                <div class="coach-tip-header">
                    <div class="coach-title">即時健身教練</div>
                    <div class="quality-display">
                        <div class="quality-title">品質評分</div>
                        <div class="quality-value">0</div>
                        <div class="quality-max">/5</div>
                    </div>
                </div>
                <div class="coach-tip-content">
                    <div class="coach-tip-text">
                        請選擇運動類型並開始偵測以獲得即時建議。
                    </div>
                </div>
            </div>
        
            <!-- 怪物區域 - 調整結構，血量在上，怪物在下 -->
            <div class="monster-area">
                <!-- 怪物血量條 -->
                <div class="hp-bar">
                    <div class="hp-label">怪物血量</div>
                    <div class="hp-value" id="monster-hp">100</div>
                </div>
                <!-- 怪物場景容器 - 添加明確的容器結構 -->
                <div class="monster-container">
                    <div id="monster-scene-container" class="monster-scene-container"></div>
                </div>
            </div>
        </div>
    </div>
</div>


</body>
</html>